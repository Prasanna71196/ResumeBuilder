<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
  <meta charset="UTF-8" />
  <title>Resume Builder | Your Resume</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@100;700&family=Pacifico&family=Quicksand:wght@300;700&family=Roboto&family=Volkhov&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
  <style>
    .footer-large { background: #047857; color: #fff; width: 100%; padding-top: 46px; padding-bottom: 32px; margin-top: 48px; font-family: 'Poppins', Arial, sans-serif;}
    .footer-content-wrap { display: flex; flex-wrap: wrap; max-width: 1600px; margin: 0 auto; justify-content: flex-start; gap: 60px;}
    .footer-brand-block, .brand-logo { display: flex; align-items: center; gap: 12px; min-width: 230px; margin-bottom: 35px;}
    .footer-link-block { display: flex; gap: 85px; flex: 1; justify-content: flex-start; }
    .footer-link-block > div { display: flex; flex-direction: column; gap: 5px; min-width: 180px;}
    .footer-section-title { color: #b9bccb; font-weight: 600; margin-bottom: 8px; letter-spacing: 0.7px; text-transform: uppercase; margin-top: 5px;}
    .footer-link-block a { color: #fff; text-decoration: none; transition: color 0.15s; font-weight: 400; margin-bottom: 5px; font-size: 1.06em;}
    .footer-link-block a:hover { color: #56a0f3; text-decoration: underline;}
    .footer-bottom-row { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: baseline; gap: 36px; max-width: 1600px; margin: 40px auto 0 auto; padding-top: 35px; border-top: 1.7px solid #27293a;}
    .footer-socmed-row a { color: #b9bccb; font-size: 1.23em; margin: 1px 9px; text-decoration: none; transition: color 0.14s; display: inline-block;}
    .footer-socmed-row a:hover { color: white; background: #047857; border-radius: 50%; }
    @media (max-width: 1100px) { .footer-content-wrap, .footer-bottom-row { flex-direction: column; gap: 18px; align-items: flex-start; } .footer-link-block { flex-direction: column; gap: 28px; } .footer-bottom-row { align-items: flex-start; } }
    @media (max-width: 650px) { .footer-large { padding: 30px 0 16px 0; } .footer-content-wrap, .footer-bottom-row { flex-direction: column; gap: 12px; padding: 0 13px; } .footer-brand-block, .footer-link-block > div { min-width: unset; } }
    .brand-logo { display: flex; align-items: center; font-family: 'Poppins', 'Segoe UI', Arial, sans-serif; font-weight: 700; font-size: 1.45rem; gap: 10px; }
    .brand-logo a { display: flex; align-items: center; text-decoration: none; }
    .brand-img { height: 40px; width: 40px; border-radius: 8px; box-shadow: 0 1.5px 5px rgba(0,0,0,0.15); margin-right: 8px; background: #fff; object-fit: cover; }
    .brand-text { color: #232a3a; font-size: 1.21em; letter-spacing: 0.5px;}
    .brand-highlight { color: white; font-weight: 800; margin-left: 3px; letter-spacing: 1px;}
    .footer .brand-text { color: #fafbfa; }
    .footer .brand-highlight { color: #75cbd3; }

    .resume-container {
  max-width: 760px;
  margin: 40px auto;
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 6px 28px #dde3df;
  display: flex;
  overflow: hidden;
}

.sidebar {
  background: #63a3a1;
  width: 230px;
  color: #f0f7f7;
  /* REMOVE any border-radius here */
  /* border-radius: 18px 0 0 18px; <--- REMOVE or comment this out */
  padding: 58px 22px 58px 22px;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 1000px;
}

.main-content {
  flex: 1;
  padding: 64px 36px 64px 36px;
  background: #fff;
  min-height: 1000px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  /* REMOVE border-radius or box-shadow here */
}

  </style>
</head>
<body>
  <header class="header">
    <div class="brand-logo">
      <a href="{% url 'home' %}">
        <img src="{% static 'images/logo.png' %}" alt="Vetri Templates Logo" class="brand-img">
        <span class="brand-text">Vetri <span class="brand-highlight">Templates</span></span>
      </a>
    </div>
    <nav>
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'templates' %}">Templates</a>
      <a href="{% url 'details' %}">Details</a>
      <a href="{% url 'resume' %}">Resume</a>
    </nav>
    <div id="nav-user"></div>
    <button onclick="logout()" style="margin-left:16px; background:#047857; color:white; border:none; border-radius:5px; padding:5px 18px; cursor:pointer;">Logout</button>
  </header>

  <div class="main-content">
    <h2>Your Resume Preview</h2>
    <div class="resume-btn-bar">
      <button class="submit-btn" onclick="window.print()">Download PDF</button>
      <button class="submit-btn" onclick="alert('Word download is Django backend feature!')">Download Word</button>
    </div>
    <div class="resume-template" id="generatedResume"></div>
  </div>

  <footer class="footer-large">
    <div class="footer-content-wrap">
      <div class="brand-logo">
        <a href="{% url 'home' %}">
          <img src="{% static 'images/logo.png' %}" alt="Vetri Templates Logo" class="brand-img">
          <span class="brand-text">Vetri <span class="brand-highlight">Templates</span></span>
        </a>
      </div>
      <div class="footer-link-block">
        <div>
          <div class="footer-section-title">RESUME</div>
          <a href="#">AI Resume Builder</a>
          <a href="#">ATS Scorer</a>
          <a href="#">Resume Examples</a>
          <a href="#">Resume Templates</a>
          <div class="footer-section-title" style="margin-top:20px;">COVER LETTER</div>
          <a href="#">Cover Letter Examples</a>
          <a href="#">Cover Letter Templates</a>
        </div>
        <div>
          <div class="footer-section-title">JOB SEEKERS</div>
          <a href="#">Job Search</a>
          <div class="footer-section-title" style="margin-top:20px;">RESOURCES</div>
          <a href="#">Blog</a>
          <a href="#">Resume Help</a>
          <a href="#">Job Interview</a>
          <a href="#">Career</a>
          <a href="#">Writing A Resume</a>
          <a href="#">Writing A Cover Letter</a>
        </div>
        <div>
          <div class="footer-section-title">OUR COMPANY</div>
          <a href="#">About Us</a>
          <a href="#">Pricing</a>
          <a href="#">Updates</a>
          <a href="#">Sponsorship Program</a>
          <a href="#">Media Kit</a>
          <a href="#">Affiliates</a>
        </div>
        <div>
          <div class="footer-section-title">SUPPORT</div>
          <a href="#">FAQ</a>
          <a href="#">Contact Us</a>
          <a href="#">Terms Of Service</a>
          <a href="#">Privacy</a>
          <a href="#">Right Of Withdrawal</a>
          <a href="#">Do Not Sell, Do Not Share</a>
          <a href="#">Your Privacy Choices</a>
        </div>
      </div>
    </div>
  </footer>
  <script>
    document.getElementById('nav-user').innerText = "Welcome, "+ (localStorage.getItem('current_user')||'') + "!";
    if (!localStorage.getItem('logged_in') && !localStorage.getItem('resume_data')) window.location.href = "{% url 'home' %}";
    // Render resume content
    let templateId = localStorage.getItem('chosen_template');
    let data = JSON.parse(localStorage.getItem('resume_data')||'{}');
    let photoUrl = data.photo || localStorage.getItem('resume_photo') || '';
    function renderList(val) {
      if (!val) return '';
      return '<ul>' + val.split(/[,\n]/).filter(Boolean).map(s=>"<li>"+s.trim()+"</li>").join('') + '</ul>';
    }
    let html = "";
    if (templateId=="1" || !templateId) {
      html = `
      <div class="resume-template-header">
        <div>
          <h1>${data.name||''}</h1>
          <div><strong>${data.email||''}</strong> | ${data.phone||''}</div>
          <div>${data.address||''}</div>
        </div>
        ${photoUrl ? `<img src="${photoUrl}" alt="Your Photo">` : ''}
      </div>
      <h2>Professional Summary</h2>
      <div>${data.summary||''}</div>
      <h2>Tech Stack</h2>
      <div>${renderList(data.techstack)}</div>
      <h2>Skills</h2>
      <div>${renderList(data.skills)}</div>
      <h2>Experience</h2>
      ${(function() {
        let xpHtml = '';
        for (let i=1; data['company_name_'+i]; i++) {
          xpHtml += `<h3>${data['company_name_'+i]||''}, ${data['designation_'+i]||''}</h3>
          <div>${data['start_date_'+i]||''} - ${data['end_date_'+i]||''} | ${data['company_location_'+i]||''}</div>
          <div>Years: ${data['years_'+i]||''}</div>
          <div>${data['description_'+i]||''}</div>
          <div><b>Certifications:</b> ${renderList(data['company_cert_'+i])}</div>`;
          for (let p=1; data['project_name_'+i+"_"+p]; p++)
            xpHtml += `<div style="margin-left:16px;"><b>Project:</b> ${data['project_name_'+i+"_"+p]||''}, <b>Certification:</b> ${data['certification_'+i+"_"+p]||''}</div>`;
        }
        return xpHtml || "<div>No experience given.</div>";
      })()}
      <h2>Certifications</h2>
      <div>${renderList(data.certifications)}</div>
      <h2>Awards & Recognitions</h2>
      <div>${renderList(data.awards)}</div>
      <h2>Key Achievements</h2>
      <div>${data.achievements||''}</div>
      <h2>Education</h2>
      <div>
        <b>10th:</b> ${data.school_10||''}, ${data.marks_10||''}, ${data.location_10||''}<br>
        <b>12th:</b> ${data.school_12||''}, ${data.marks_12||''}, ${data.location_12||''}<br>
        <b>College:</b> ${data.college||''}, ${data.marks_college||''}, ${data.location_college||''}
      </div>`;
    }
    document.getElementById('generatedResume').innerHTML = html;
    function logout() {
      localStorage.removeItem('logged_in'); window.location.href = "{% url 'home' %}";
    }
  </script>
</body>
</html>
